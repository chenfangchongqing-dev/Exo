<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>词汇 Vocabulaire</title>
  <style>
    :root {
      --bg: #f8fafc;
      --card: #fff;
      --ink: #0f172a;
      --muted: #64748b;
      --brand: #2563eb;
      --radius: 14px;
    }
    html, body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
      background: var(--bg);
      color: var(--ink);
    }
    .wrap {
      max-width: 960px;
      margin: 32px auto;
      padding: 0 16px;
    }
    h1 {
      font-size: 28px;
      margin-bottom: 12px;
      font-weight: 700;
    }
    .note {
      font-size: 15px;
      color: var(--muted);
      margin-bottom: 24px;
    }
    .searchbar {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 24px;
    }
    input, select {
      padding: 10px 12px;
      border-radius: var(--radius);
      border: 1px solid #cbd5e1;
      font-size: 15px;
    }
    input { flex: 1; min-width: 200px; }
    select { background: #fff; }
    .list { display: grid; gap: 12px; }
    .card {
      background: var(--card);
      padding: 16px 20px;
      border-radius: var(--radius);
      border: 1px solid #e2e8f0;
      box-shadow: 0 2px 8px rgba(0,0,0,.04);
      transition: .15s;
    }
    .card:hover { border-color: var(--brand); box-shadow: 0 4px 10px rgba(37,99,235,.08); }
    .card a { color: var(--brand); text-decoration: none; font-weight: 600; }
    footer {
      margin-top: 48px;
      font-size: 14px;
      color: var(--muted);
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <a href="../index.html" style="text-decoration:none;color:var(--brand);font-weight:600;">← 返回首页</a>
    <h1>词汇 Vocabulaire</h1>
    <div class="note">
      支持按 <b>单元（U1…U9）</b> 与 <b>主题</b> 搜索与筛选。<br>
      将练习 HTML 放到 <code>Vocabulaire/U1/…U9/</code> 对应子文件夹，并在 <code>DATA</code> 里登记即可出现在列表中。
    </div>

    <div class="searchbar">
      <input type="text" id="search" placeholder="搜索：标题 / 单元（如 U1） / 主题 / 标签…" />
      <select id="unit">
        <option value="">全部单元</option>
        <option>U1</option><option>U2</option><option>U3</option>
        <option>U4</option><option>U5</option><option>U6</option>
        <option>U7</option><option>U8</option><option>U9</option>
      </select>
      <select id="theme">
        <option value="">全部主题</option>
        <option value="engagement">engagement</option>
        <option value="travail">travail</option>
        <option value="vie">vie</option>
      </select>
    </div>

    <div class="list" id="list"></div>

    <footer>© 《高级法语综合课》</footer>
  </div>

<script>
/* ---------------- 练习数据 DATA ---------------- */
const DATA = [
  {
    title: "U2 词汇｜engagement & actions",
    path: "Vocabulaire/U2/exo1.html",
    unit: "U2",
    theme: "engagement",
    tags: ["vocabulaire","slogans","soutenir","mobilisation","pétition","expulsions","régularisations"]
  },
  { 
    title: "U2 · Engagement et actions — Complétez et traduisez", 
    path: "Vocabulaire/U2/exo2.html", 
    unit: "U2", 
    theme: "engagement", 
    tags: ["solidarité", "actions", "vocabulaire", "état psychologique", "etat psychologique"]
  },
  {
    title: "U2 · Le travail (3) — Complétez",
    path: "Vocabulaire/U2/exo3.html",
    unit: "U2",
    theme: "travail",
    tags: ["contrat","entreprise","emploi","état psychologique","etat psychologique","psychologie"]
  },
  {
    title: "U2 · Témoignage de Léo — Complétez",
    path: "Vocabulaire/U2/exo4.html",
    unit: "U2",
    theme: "état psychologique",
    tags: ["témoignage","emploi","vocation","état psychologique","etat psychologique","psychologie"]
  },
  {
  title: "U2 · Le travail (3) — Complétez avec les mots de la liste",
  path: "Vocabulaire/U2/exo5.html",
  unit: "U2",
  theme: "travail",
  tags: ["travail","emploi","entreprise","contrat","embauche","état psychologique"]
},
  {
  title: "U3 · La santé (1) — Complétez avec les mots de la liste",
  path: "Vocabulaire/U3/exo1.html",
  unit: "U3",
  theme: "santé",
  tags: ["assurance maladie","sécurité sociale","consultation médialce"]
},
  {
  title: "U3 · La santé (1) — Complétez avec les mots de la liste",
  path: "Vocabulaire/U3/exo2.html",
  unit: "U3",
  theme: "activités en ligne",
  tags: ["matériel numérique","équipement","activité en ligne"]
},
];

/* ---------------- 工具函数 ---------------- */
// 去重音 + 小写
const norm = (s) => (s ?? "")
  .toString()
  .normalize('NFD')
  .replace(/[\u0300-\u036f]/g, '')
  .toLowerCase();

function match(item, keyword, unit, theme) {
  const hay = norm(item.title + " " + item.unit + " " + item.theme + " " + item.path + " " + (item.tags||[]).join(" "));
  if (keyword && !hay.includes(norm(keyword))) return false;
  if (unit && item.unit !== unit) return false;
  if (theme && item.theme !== theme) return false;
  return true;
}

/* ---------------- 渲染列表 ---------------- */
function render() {
  const list = document.getElementById("list");
  const keyword = document.getElementById("search").value.trim();
  const unit = document.getElementById("unit").value;
  const theme = document.getElementById("theme").value;

  const filtered = DATA.filter(item => match(item, keyword, unit, theme));
  list.innerHTML = "";

  if (!filtered.length) {
    list.innerHTML = `<div style="color:#64748b;text-align:center;padding:40px 0;">暂无匹配结果。<br>检查搜索词或筛选条件；或确认 DATA 中登记该练习。</div>`;
    return;
  }

  filtered.forEach(item => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <a href="../${item.path}" target="_blank">${item.title}</a><br>
      <small>单元：${item.unit} ｜ 主题：${item.theme}</small><br>
      <small style="color:#64748b;">标签：${(item.tags||[]).join(", ")}</small>
    `;
    list.appendChild(card);
  });
}

/* ---------------- 事件监听 ---------------- */
["search","unit","theme"].forEach(id => {
  document.getElementById(id).addEventListener("input", render);
  document.getElementById(id).addEventListener("change", render);
});

/* 初始化 */
render();
</script>
</body>
</html>
