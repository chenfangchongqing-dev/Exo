<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>U2 · Vocabulaire — Complétez avec les mots de la liste</title>
<style>
  :root{--bg:#f8fafc;--card:#fff;--ink:#0f172a;--muted:#64748b;--brand:#2563eb;--ok:#16a34a;--bad:#dc2626;--chip:#eef2ff}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{max-width:960px;margin:24px auto;padding:0 16px}
  .title{font-size:22px;font-weight:700;margin-bottom:8px}
  .note{color:var(--muted);font-size:14px;margin-bottom:16px}
  .card{background:var(--card);border:1px solid #e5e7eb;border-radius:14px;box-shadow:0 4px 14px rgba(15,23,42,.05);padding:16px;margin:12px 0}
  .bank{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:8px}
  .chip{background:var(--chip);border:1px dashed #c7d2fe;color:#1e3a8a;padding:6px 10px;border-radius:999px;cursor:grab;user-select:none}
  .chip:active{transform:scale(.98)}
  .drop{display:inline-flex;min-width:140px;min-height:30px;align-items:center;justify-content:center;border:2px dashed #cbd5e1;border-radius:10px;padding:2px 8px;margin:0 4px;vertical-align:middle;background:#fff;transition:.15s}
  .drop.filled{border-color:#94a3b8;background:#f8fafc}
  .drop.ok{border-color:var(--ok);background:#ecfdf5}
  .drop.bad{border-color:var(--bad);background:#fef2f2}
  .drop.active{border-color:#2563eb; box-shadow:0 0 0 3px rgba(37,99,235,.15)}
  .bar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:16px 0}
  .btn{background:var(--brand);color:#fff;border:0;border-radius:12px;padding:10px 14px;cursor:pointer}
  .btn.secondary{background:#e5e7eb;color:#111}
  .score{font-weight:700}
  @media (max-width:640px){.drop{min-width:110px}}
</style>
</head>
<body>
<div class="wrap">
  <div class="title">Complétez avec les mots de la liste.</div>
  <div class="note">PC：拖拽或点选填空；手机：点空格高亮后点击词块；长按空格清空；完成后点“Vérifier”。</div>

  <!-- Banque de mots -->
  <div class="card">
    <div class="bank" id="bank"></div>
    <div class="note">
      patron · CDI · mission · État · à temps plein · embauche · emploie · entreprise · effectif
    </div>
  </div>

  <!-- Texte à compléter -->
  <div class="card" style="font-size:18px">
    <p>
      Cette <b>entreprise</b> a un <span class="drop" data-answer="effectif"></span> de soixante personnes.
      Elle <span class="drop" data-answer="emploie"></span> trois personnes handicapées
      <span class="drop" data-answer="à temps plein"></span> et deux à temps partiel.
    </p>
    <p>
      Elles sont en CDD ou en <span class="drop" data-answer="CDI"></span>.
      Elles ont toutes une <span class="drop" data-answer="mission"></span> bien précise.
    </p>
    <p>
      Le <span class="drop" data-answer="patron"></span> reçoit une aide financière de l’
      <span class="drop" data-answer="État"></span> pour l’
      <span class="drop" data-answer="embauche"></span> des personnes en situation de handicap.
    </p>
  </div>

  <!-- Contrôles -->
  <div class="bar">
    <button class="btn" id="check">Vérifier</button>
    <button class="btn secondary" id="reset">Réinitialiser</button>
    <span class="score" id="score"></span>
  </div>
</div>

<script>
/* Mots disponibles */
const WORDS = ["patron","CDI","mission","État","à temps plein","embauche","emploie","entreprise","effectif"];

/* Génération des étiquettes */
const bank = document.getElementById('bank');
WORDS.forEach(w=>{
  const chip=document.createElement('span');
  chip.className='chip'; chip.textContent=w; chip.draggable=true;
  chip.addEventListener('dragstart',e=>e.dataTransfer.setData('text/plain',w));
  chip.addEventListener('click',()=>{
    const target=activeDrop||[...document.querySelectorAll('.drop')].find(d=>!d.dataset.value);
    if(target) fillDrop(target,w);
  });
  bank.appendChild(chip);
});

/* Gestion des zones de dépôt */
const drops=[...document.querySelectorAll('.drop')];
let activeDrop=null, longTimer=null;

function setActive(d){
  drops.forEach(x=>x.classList.remove('active'));
  activeDrop=d; d.classList.add('active'); d.classList.remove('ok','bad');
}
function fillDrop(d,word){
  d.textContent=word; d.dataset.value=word;
  d.classList.add('filled'); d.classList.remove('ok','bad');
}
function clearDrop(d){
  d.textContent=''; d.dataset.value=''; d.classList.remove('filled','ok','bad','active');
  if(activeDrop===d) activeDrop=null;
}
drops.forEach(d=>{
  d.addEventListener('dragover',e=>{e.preventDefault();});
  d.addEventListener('drop',e=>{e.preventDefault();fillDrop(d,e.dataTransfer.getData('text/plain'));});
  d.addEventListener('click',()=>setActive(d));
  d.addEventListener('touchstart',()=>{longTimer=setTimeout(()=>clearDrop(d),500);},{passive:true});
  d.addEventListener('touchend',()=>clearTimeout(longTimer));
  d.addEventListener('touchmove',()=>clearTimeout(longTimer));
});

/* Vérification */
document.getElementById('check').addEventListener('click',()=>{
  let ok=0,total=drops.length;
  drops.forEach(d=>{
    const val=(d.dataset.value||'').trim();
    const right=d.dataset.answer;
    if(val===right){d.classList.add('ok');d.classList.remove('bad');ok++;}
    else if(val){d.classList.add('bad');d.classList.remove('ok');}
  });
  document.getElementById('score').textContent=`得分：${ok} / ${total}`;
});

/* Réinitialisation */
document.getElementById('reset').addEventListener('click',()=>{
  drops.forEach(clearDrop);
  document.getElementById('score').textContent='';
});
</script>
</body>
</html>
